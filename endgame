#!/bin/python3

import json
import sys

def main():
    args = sys.argv
    if args[1] == 'rm':
        removed = removeLog()
        print('removed', removed)
    elif args[1] == 'add':
        appendLogs({"test":"srntdeai"})
        print('added')
    elif args[1] == 'list':
        print(lastLogs(args))
    else:
        print('invalid argument')

def writeLogs(data):
    with open('logs.json', 'w') as f:
        json.dump(data, f, indent=2)

def readLogs(file="logs.json"):
    with open(file) as f:
        return json.loads(f.read())

def appendLogs(data):
    logs = readLogs()
    logs.append(data)
    writeLogs(logs)

def removeLog():
    logs = readLogs()
    removed = logs.pop()
    writeLogs(logs)
    return removed
    
def lastLogs(args):
    try:
        amount = args[2]
    except:
        amount = 1

    logs = readLogs()
    i = int(amount)
    if len(logs) < i:
        return "There aren't that many logs"
    return logs[-i:]

if __name__ == "__main__": main()
